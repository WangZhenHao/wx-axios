!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):(e=e||self).WxAxois=t()}(this,function(){"use strict";function e(e){if("function"!=typeof e)throw new TypeError("executor must be a function.");var t;this.promise=new Promise(function(e){t=e});var n=this;e(function(e){n.reason||(n.reason="calcel "+e,t(n.reason))})}e.source=function(){var t;return{token:new e(function(e){t=e}),cancel:t}};var t=e;var r=function(e,t){return Object.assign(e,t)};var l=function(e,t,n){var o;(200<=(o=n.statusCode)&&o<300?e:t)(n)};var n=function(e,t){return e&&!/^([a-z][a-z\d\+\-\.]*:)?\/\//i.test(t)?(n=e,(e=t)?n.replace(/\/+$/,"")+"/"+e.replace(/^\/+/,""):n):t;var n};function o(r){var e=r.url,i=r.data,s=r.header,u=r.timeout,a=r.method,c=r.dataType,f=r.responseType,h=r.cancelToken,t=r.baseURL,e=n(t,e);return new Promise(function(t,n){var o=wx.request({url:e,data:i,header:s,timeout:u,method:a,dataType:c,responseType:f,success:function(e){e.config=r,l(t,n,e)},fail:function(e){n(e)}});h&&h.promise.then(function(e){o&&(o.abort(),n(e),o=null)})})}function i(){this.handlers=[]}i.prototype.use=function(e,t){return this.handlers.push({fulfilled:e,rejected:t}),this.handlers.length-1},i.prototype.eject=function(e){this.handlers[e]&&(this.handlers[e]=null)},i.prototype.forEach=function(t){this.handlers.forEach(function(e){null!==e&&t(e)})};var s=i,u={timeout:0,header:{"content-type":"application/json"},method:"GET"};function a(e){this.defaults=r(u,e),this.interceptors={request:new s,response:new s}}a.prototype={request:function(e){e=0<arguments.length&&void 0!==e?e:{};(e=r(this.defaults,e)).method||(e.method="get"),e.method=e.method.toLowerCase();var t=[o,null],n=Promise.resolve(e);for(this.interceptors.request.forEach(function(e){t.unshift(e.fulfilled,e.rejected)}),this.interceptors.response.forEach(function(e){t.push(e.fulfilled,e.rejected)});t.length;)n=n.then(t.shift(),t.shift());return n}},["get","post","put"].forEach(function(o){a.prototype[o]=function(e,t,n){return this.request(r(n||{},{url:e,data:t,method:o}))}});var c=a;return c.cancelToken=t,c});
