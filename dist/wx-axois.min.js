((e,t)=>{"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):(e=e||self).WxAxois=t()})(this,function(){function e(e){if("function"!=typeof e)throw new TypeError("executor must be a function.");this.promise=new Promise(function(e){t=e});var t,n=this;e(function(e){n.reason||(n.reason="calcel "+e,t(n.reason))})}e.source=function(){var t;return{token:new e(function(e){t=e}),cancel:t}};var t=e;function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var r=function(e,t){return e=function(e){var t=e.constructor==Array?[]:{};if("object"==o(e)){if(JSON)t=JSON.parse(JSON.stringify(e));else for(var n in e)t[n]="object"==o(e[n])?this.deepCopy(e[n]):e[n];return t}}(e),t=t||{},Object.assign(e,t)};var p=function(e,t,n){var o;(200<=(o=n.statusCode)&&o<300?e:t)(n)};var n=function(e,t){var n;return e&&!/^([a-z][a-z\d\+\-\.]*:)?\/\//i.test(t)?(e=e,(n=t)?e.replace(/\/+$/,"")+"/"+n.replace(/^\/+/,""):e):t};function i(r){var e=r.url,i=r.data,u=r.header,s=r.timeout,f=r.method,c=r.dataType,a=r.responseType,l=r.cancelToken,e=n(r.baseURL,e);return new Promise(function(t,n){var o=wx.request({url:e,data:i,header:u,timeout:s,method:f,dataType:c,responseType:a,success:function(e){e.config=r,p(t,n,e)},fail:function(e){n(e)}});l&&l.promise.then(function(e){o&&(o.abort(),n(e),o=null)})})}var u=function(){return i};function s(){this.handlers=[]}s.prototype.use=function(e,t){return this.handlers.push({fulfilled:e,rejected:t}),this.handlers.length-1},s.prototype.eject=function(e){this.handlers[e]&&(this.handlers[e]=null)},s.prototype.forEach=function(t){this.handlers.forEach(function(e){null!==e&&t(e)})};var f=s;function c(e){this.defaults=e,this.interceptors={request:new f,response:new f}}c.prototype={request:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};(e=r(this.defaults,e)).method||(e.method="get"),e.method=e.method.toLowerCase();var t=[u(),null],n=Promise.resolve(e);for(this.interceptors.request.forEach(function(e){t.unshift(e.fulfilled,e.rejected)}),this.interceptors.response.forEach(function(e){t.push(e.fulfilled,e.rejected)});t.length;)n=n.then(t.shift(),t.shift());return n}},["get","post","put"].forEach(function(o){c.prototype[o]=function(e,t,n){return this.request(r(n||{},{url:e,data:t,method:o}))}});var a=c,l={timeout:0,header:{"content-type":"application/json"},method:"GET"};var h=function(e,t){for(var n in t)e[n]=t[n];return e};function d(e){var e=new a(e),t=a.prototype.request.bind(e);return h(t,e),e}var y=d(l);return y.create=function(e){return d(r(l,e))},y.cancelToken=t,y});
